<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SportCenter - 我的預約</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="LOGO.png">
</head>

<body class="theme-sport">
  <header class="header header--sport">
    <div class="container header__inner header__inner--sport">
      <a class="brand brand--sport" href="index.html" aria-label="SportCenter">
        <img src="LOGO.png" alt="logo" class="brand__logo" />
        <div class="brand__text">
          <div class="brand__title">SportCenter</div>
          <div class="brand__subtitle">球場預約系統</div>
        </div>
      </a>

      <nav class="nav nav--sport" aria-label="主選單">
        <a class="nav__link" href="index.html">預約</a>
        <a class="nav__link" href="venues.html">場館</a>
        <a class="nav__link is-active" href="my.html">我的預約</a>
      </nav>

      <div class="nav__actions nav__actions--sport">
        <span id="navUserName" class="nav__user"></span>
        <button id="btnLogin" class="btn btn--ghost" type="button">登入</button>
        <button id="btnLogout" class="btn btn--ghost" type="button" hidden>登出</button>
      </div>
    </div>
  </header>

  <main class="container page page--sport">
    <section class="card card--sport">
      <div class="card__head">
        <div>
          <h1 class="h1">我的預約</h1>
          <p class="muted">此頁會顯示你自己的預約紀錄（需登入）。</p>
        </div>
      </div>

      <div class="layout-2col">
        <!-- LEFT: 查詢條件 -->
        <div class="panel">
          <div class="grid grid--2">
            <div class="form__group">
              <label class="form__label">日期</label>
              <input id="myDate" type="date" class="input" />
              <div class="muted" style="margin-top:6px;">會查詢該日期的所有預約，並只顯示「你自己的」。</div>
            </div>

            <div class="form__group">
              <label class="form__label">球場（可選）</label>
              <select id="myCourt" class="select">
                <option value="">全部</option>
                <option value="1">A 場</option>
                <option value="2">B 場</option>
              </select>
            </div>
          </div>

          <div class="actions actions--sport" style="margin-top:10px;">
            <button id="btnReloadMy" class="btn" type="button">重新載入</button>
            <span id="myMsg" class="muted" style="margin-left:12px;"></span>
          </div>

          <div class="hint" style="margin-top:12px;">
            <div class="hint__dot"></div>
            <div class="hint__text muted">
              如果你之後要做「取消預約」，後端需新增取消 API；目前後端 routes 顯示還沒有取消/刪除的 endpoint，所以此頁先做「查看」。
            </div>
          </div>
        </div>

        <!-- RIGHT: 我的預約清單 -->
        <div class="panel">
          <div class="infoBox">
            <div class="infoBox__title">清單</div>
            <div id="myCount" class="muted" style="margin-top:6px;"></div>
          </div>

          <div style="overflow:auto; margin-top:10px;">
            <table class="table" id="myTable" style="width:100%; border-collapse:collapse;">
              <thead>
                <tr>
                  <th style="text-align:left; padding:10px 8px; border-bottom:1px solid rgba(15,23,42,.12);">球場</th>
                  <th style="text-align:left; padding:10px 8px; border-bottom:1px solid rgba(15,23,42,.12);">開始</th>
                  <th style="text-align:left; padding:10px 8px; border-bottom:1px solid rgba(15,23,42,.12);">結束</th>
                  <th style="text-align:left; padding:10px 8px; border-bottom:1px solid rgba(15,23,42,.12);">狀態</th>
                  <th style="text-align:left; padding:10px 8px; border-bottom:1px solid rgba(15,23,42,.12);">booking_no</th>
                </tr>
              </thead>
              <tbody id="myTbody">
                <!-- rows -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Login Modal：沿用你 index 的 Tab 結構（顯示一致） -->
  <div id="loginModal" class="modal" aria-hidden="true">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__panel" role="dialog" aria-modal="true">
      <div class="modal__header">
        <div class="authTabs" role="tablist" aria-label="登入/註冊">
          <button id="tabLogin" class="authTab is-active" type="button" role="tab" aria-selected="true">登入</button>
          <button id="tabRegister" class="authTab" type="button" role="tab" aria-selected="false">註冊</button>
        </div>
        <button class="btn btn--ghost authClose" type="button" data-close="1" aria-label="關閉">✕</button>
      </div>

      <div class="modal__body">
        <div class="form__group">
          <label class="form__label">帳號</label>
          <input id="loginName" class="input" placeholder="輸入帳號" autocomplete="username" />
        </div>

        <div class="form__group">
          <label class="form__label">密碼</label>
          <input id="loginPassword" type="password" class="input" placeholder="輸入密碼" autocomplete="current-password" />
        </div>

        <div class="form__group" id="registerEmailWrap" style="display:none;">
          <label class="form__label">Email</label>
          <input id="registerEmail" type="email" class="input" placeholder="test@example.com" autocomplete="email" />
        </div>

        <div class="actions">
          <button id="btnDoLogin" class="btn" type="button">登入</button>
          <button id="btnDoRegister" class="btn" type="button" hidden>註冊</button>
          <a href="#" id="toggleAuthMode" class="link" style="margin-left:12px;">切換到註冊</a>
        </div>
      </div>
    </div>
  </div>

  <!-- 重要：維持你現行架構：common.js 提供 API_BASE、token、refreshMe 等；my.js 專做我的預約 -->
  <script src="js/common.js"></script>
  <script src="js/my.js"></script>
</body>
</html>
